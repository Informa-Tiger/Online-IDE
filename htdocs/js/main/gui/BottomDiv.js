import { makeTabs } from "../../tools/HtmlTools.js";
import { ProgramPrinter } from "../../compiler/parser/ProgramPrinter.js";
import { MyConsole } from "./console/MyConsole.js";
import { ErrorManager } from "./ErrorManager.js";
import { InterpreterState } from "../../interpreter/Interpreter.js";
import { HomeworkManager } from "./HomeworkManager.js";
export class BottomDiv {
    constructor(main, $bottomDiv, $mainDiv) {
        this.main = main;
        this.$bottomDiv = $bottomDiv;
        this.$mainDiv = $mainDiv;
        if (this.$bottomDiv.find('.jo_tabs>.jo_pcodeTab').length > 0) {
            this.programPrinter = new ProgramPrinter(main, $bottomDiv);
        }
        if (this.$bottomDiv.find('.jo_tabheadings>.jo_console-tab').length > 0) {
            this.console = new MyConsole(main, $bottomDiv);
        }
        else {
            this.console = new MyConsole(main, null);
        }
        if (this.$bottomDiv.find('.jo_tabheadings>.jo_homeworkTabheading').length > 0) {
            this.homeworkManager = new HomeworkManager(main, $bottomDiv);
        }
        this.errorManager = new ErrorManager(main, $bottomDiv, $mainDiv);
    }
    initGUI() {
        makeTabs(this.$bottomDiv);
        if (this.programPrinter != null)
            this.programPrinter.initGUI();
        if (this.console != null)
            this.console.initGUI();
        if (this.homeworkManager != null)
            this.homeworkManager.initGUI();
        this.$bottomDiv.find('.jo_tabs').children().first().trigger("click");
        let that = this;
        jQuery(".jo_pcodeTab").on("myshow", () => {
            that.printCurrentlyExecutedModule();
        });
    }
    printCurrentlyExecutedModule() {
        var _a;
        let interpreter = this.main.getInterpreter();
        if (interpreter.state == InterpreterState.running || interpreter.state == InterpreterState.paused) {
            let module = (_a = interpreter.currentProgram) === null || _a === void 0 ? void 0 : _a.module;
            this.printModuleToBottomDiv(null, module);
        }
    }
    printModuleToBottomDiv(currentWorkspace, module) {
        if (this.programPrinter != null)
            this.programPrinter.printModuleToBottomDiv(currentWorkspace, module);
    }
    showHomeworkTab() {
        jQuery('.jo_homeworkTabheading').css('visibility', 'visible');
        let mousePointer = window.PointerEvent ? "pointer" : "mouse";
        jQuery('.jo_homeworkTabheading').trigger(mousePointer + "down");
    }
    hideHomeworkTab() {
        jQuery('.jo_homeworkTabheading').css('visibility', 'hidden');
        let mousePointer = window.PointerEvent ? "pointer" : "mouse";
        jQuery('.jo_tabheadings').children().first().trigger(mousePointer + "down");
    }
    showHideDbBusyIcon(visible) {
        let displayValue = visible ? "block" : "none";
        jQuery(".jo_db-busy").css("display", displayValue);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQm90dG9tRGl2LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NsaWVudC9tYWluL2d1aS9Cb3R0b21EaXYudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBRXBELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSx5Q0FBeUMsQ0FBQztBQUd6RSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDbkQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRWpELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBRXBFLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUV2RCxNQUFNLE9BQU8sU0FBUztJQU9sQixZQUFvQixJQUFjLEVBQVMsVUFBK0IsRUFBUyxRQUE2QjtRQUE1RixTQUFJLEdBQUosSUFBSSxDQUFVO1FBQVMsZUFBVSxHQUFWLFVBQVUsQ0FBcUI7UUFBUyxhQUFRLEdBQVIsUUFBUSxDQUFxQjtRQUU1RyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLHVCQUF1QixDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUMxRCxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQztTQUM5RDtRQUVELElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsaUNBQWlDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ3BFLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxTQUFTLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1NBQ2xEO2FBQU07WUFDSCxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksU0FBUyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztT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QUMsTUFBTSxDQUFDO1FBQ3RELE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBQ3ZELENBQUM7Q0FFSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1ha2VUYWJzIH0gZnJvbSBcIi4uLy4uL3Rvb2xzL0h0bWxUb29scy5qc1wiO1xyXG5pbXBvcnQgeyBNYWluIH0gZnJvbSBcIi4uL01haW4uanNcIjtcclxuaW1wb3J0IHsgUHJvZ3JhbVByaW50ZXIgfSBmcm9tIFwiLi4vLi4vY29tcGlsZXIvcGFyc2VyL1Byb2dyYW1QcmludGVyLmpzXCI7XHJcbmltcG9ydCB7IFdvcmtzcGFjZSB9IGZyb20gXCIuLi8uLi93b3Jrc3BhY2UvV29ya3NwYWNlLmpzXCI7XHJcbmltcG9ydCB7IE1vZHVsZSB9IGZyb20gXCIuLi8uLi9jb21waWxlci9wYXJzZXIvTW9kdWxlLmpzXCI7XHJcbmltcG9ydCB7IE15Q29uc29sZSB9IGZyb20gXCIuL2NvbnNvbGUvTXlDb25zb2xlLmpzXCI7XHJcbmltcG9ydCB7IEVycm9yTWFuYWdlciB9IGZyb20gXCIuL0Vycm9yTWFuYWdlci5qc1wiO1xyXG5pbXBvcnQgeyBNYWluQmFzZSB9IGZyb20gXCIuLi9NYWluQmFzZS5qc1wiO1xyXG5pbXBvcnQgeyBJbnRlcnByZXRlclN0YXRlIH0gZnJvbSBcIi4uLy4uL2ludGVycHJldGVyL0ludGVycHJldGVyLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJEYXRhIH0gZnJvbSBcIi4uLy4uL2NvbW11bmljYXRpb24vRGF0YS5qc1wiO1xyXG5pbXBvcnQgeyBIb21ld29ya01hbmFnZXIgfSBmcm9tIFwiLi9Ib21ld29ya01hbmFnZXIuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCb3R0b21EaXYge1xyXG5cclxuICAgIHByb2dyYW1QcmludGVyOiBQcm9ncmFtUHJpbnRlcjtcclxuICAgIGNvbnNvbGU6IE15Q29uc29sZTtcclxuICAgIGVycm9yTWFuYWdlcjogRXJyb3JNYW5hZ2VyO1xyXG4gICAgaG9tZXdvcmtNYW5hZ2VyOiBIb21ld29ya01hbmFnZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBtYWluOiBNYWluQmFzZSwgcHVibGljICRib3R0b21EaXY6IEpRdWVyeTxIVE1MRWxlbWVudD4sIHB1YmxpYyAkbWFpbkRpdjogSlF1ZXJ5PEhUTUxFbGVtZW50Pikge1xyXG5cclxuICAgICAgICBpZiAodGhpcy4kYm90dG9tRGl2LmZpbmQoJy5qb190YWJzPi5qb19wY29kZVRhYicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9ncmFtUHJpbnRlciA9IG5ldyBQcm9ncmFtUHJpbnRlcihtYWluLCAkYm90dG9tRGl2KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLiRib3R0b21EaXYuZmluZCgnLmpvX3RhYmhlYWRpbmdzPi5qb19jb25zb2xlLXRhYicpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jb25zb2xlID0gbmV3IE15Q29uc29sZShtYWluLCAkYm90dG9tRGl2KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnNvbGUgPSBuZXcgTXlDb25zb2xlKG1haW4sIG51bGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuJGJvdHRvbURpdi5maW5kKCcuam9fdGFiaGVhZGluZ3M+LmpvX2hvbWV3b3JrVGFiaGVhZGluZycpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5ob21ld29ya01hbmFnZXIgPSBuZXcgSG9tZXdvcmtNYW5hZ2VyKDxNYWluPm1haW4sICRib3R0b21EaXYpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5lcnJvck1hbmFnZXIgPSBuZXcgRXJyb3JNYW5hZ2VyKG1haW4sICRib3R0b21EaXYsICRtYWluRGl2KTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0R1VJKCkge1xyXG4gICAgICAgIG1ha2VUYWJzKHRoaXMuJGJvdHRvbURpdik7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvZ3JhbVByaW50ZXIgIT0gbnVsbCkgdGhpcy5wcm9ncmFtUHJpbnRlci5pbml0R1VJKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY29uc29sZSAhPSBudWxsKSB0aGlzLmNvbnNvbGUuaW5pdEdVSSgpO1xyXG4gICAgICAgIGlmKHRoaXMuaG9tZXdvcmtNYW5hZ2VyICE9IG51bGwpIHRoaXMuaG9tZXdvcmtNYW5hZ2VyLmluaXRHVUkoKTtcclxuXHJcbiAgICAgICAgdGhpcy4kYm90dG9tRGl2LmZpbmQoJy5qb190YWJzJykuY2hpbGRyZW4oKS5maXJzdCgpLnRyaWdnZXIoXCJjbGlja1wiKTtcclxuXHJcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGpRdWVyeShcIi5qb19wY29kZVRhYlwiKS5vbihcIm15c2hvd1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoYXQucHJpbnRDdXJyZW50bHlFeGVjdXRlZE1vZHVsZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwcmludEN1cnJlbnRseUV4ZWN1dGVkTW9kdWxlKCkge1xyXG4gICAgICAgIGxldCBpbnRlcnByZXRlciA9IHRoaXMubWFpbi5nZXRJbnRlcnByZXRlcigpO1xyXG4gICAgICAgIGlmIChpbnRlcnByZXRlci5zdGF0ZSA9PSBJbnRlcnByZXRlclN0YXRlLnJ1bm5pbmcgfHwgaW50ZXJwcmV0ZXIuc3RhdGUgPT0gSW50ZXJwcmV0ZXJTdGF0ZS5wYXVzZWQpIHtcclxuICAgICAgICAgICAgbGV0IG1vZHVsZSA9IGludGVycHJldGVyLmN1cnJlbnRQcm9ncmFtPy5tb2R1bGU7XHJcbiAgICAgICAgICAgIHRoaXMucHJpbnRNb2R1bGVUb0JvdHRvbURpdihudWxsLCBtb2R1bGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcmludE1vZHVsZVRvQm90dG9tRGl2KGN1cnJlbnRXb3Jrc3BhY2U6IFdvcmtzcGFjZSwgbW9kdWxlOiBNb2R1bGUpIHtcclxuICAgICAgICBpZiAodGhpcy5wcm9ncmFtUHJpbnRlciAhPSBudWxsKSB0aGlzLnByb2dyYW1QcmludGVyLnByaW50TW9kdWxlVG9Cb3R0b21EaXYoY3VycmVudFdvcmtzcGFjZSwgbW9kdWxlKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc2hvd0hvbWV3b3JrVGFiKCkge1xyXG5cclxuICAgICAgICBqUXVlcnkoJy5qb19ob21ld29ya1RhYmhlYWRpbmcnKS5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xyXG4gICAgICAgIGxldCBtb3VzZVBvaW50ZXIgPSB3aW5kb3cuUG9pbnRlckV2ZW50ID8gXCJwb2ludGVyXCIgOiBcIm1vdXNlXCI7XHJcbiAgICAgICAgalF1ZXJ5KCcuam9faG9tZXdvcmtUYWJoZWFkaW5nJykudHJpZ2dlcihtb3VzZVBvaW50ZXIgKyBcImRvd25cIik7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGhpZGVIb21ld29ya1RhYigpIHtcclxuXHJcbiAgICAgICAgalF1ZXJ5KCcuam9faG9tZXdvcmtUYWJoZWFkaW5nJykuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xyXG4gICAgICAgIGxldCBtb3VzZVBvaW50ZXIgPSB3aW5kb3cuUG9pbnRlckV2ZW50ID8gXCJwb2ludGVyXCIgOiBcIm1vdXNlXCI7XHJcbiAgICAgICAgalF1ZXJ5KCcuam9fdGFiaGVhZGluZ3MnKS5jaGlsZHJlbigpLmZpcnN0KCkudHJpZ2dlcihtb3VzZVBvaW50ZXIgKyBcImRvd25cIik7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNob3dIaWRlRGJCdXN5SWNvbih2aXNpYmxlOiBib29sZWFuKXtcclxuICAgICAgICBsZXQgZGlzcGxheVZhbHVlOiBzdHJpbmcgPSB2aXNpYmxlID8gXCJibG9ja1wiIDogXCJub25lXCI7XHJcbiAgICAgICAgalF1ZXJ5KFwiLmpvX2RiLWJ1c3lcIikuY3NzKFwiZGlzcGxheVwiLCBkaXNwbGF5VmFsdWUpO1xyXG4gICAgfVxyXG5cclxufSJdfQ==