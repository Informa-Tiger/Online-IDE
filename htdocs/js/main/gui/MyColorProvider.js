export class MyColorProvider {
    constructor(main) {
        this.main = main;
    }
    provideDocumentColors(model, token) {
        var _a, _b, _c, _d, _e, _f;
        let consoleModel = (_c = (_b = (_a = this.main.getBottomDiv()) === null || _a === void 0 ? void 0 : _a.console) === null || _b === void 0 ? void 0 : _b.editor) === null || _c === void 0 ? void 0 : _c.getModel();
        let isConsole = model == consoleModel;
        let isMainWindow = model == this.main.getMonacoEditor().getModel();
        if (!(isConsole || isMainWindow))
            return;
        let module = isConsole ? (_e = (_d = this.main.getBottomDiv()) === null || _d === void 0 ? void 0 : _d.console) === null || _e === void 0 ? void 0 : _e.compiler.module :
            (_f = this.main.getCurrentWorkspace()) === null || _f === void 0 ? void 0 : _f.getModuleByMonacoModel(model);
        if (module == null) {
            return null;
        }
        if (this.main.getCompiler() == null) {
            let that = this;
            let i = 3;
            return new Promise(function (resolve, reject) {
                let f = () => {
                    if (that.main.getCompiler() != null) {
                        that.main.compileIfDirty();
                        resolve(module.colorInformation);
                    }
                    else {
                        i--;
                        if (i == 0) {
                            resolve([]);
                        }
                        else {
                            setTimeout(f, 500);
                        }
                    }
                };
                setTimeout(f, 500);
            });
        }
        this.main.compileIfDirty();
        return module.colorInformation;
    }
    provideColorPresentations(model, colorInfo, token) {
        var color = colorInfo.color;
        var oldColor = model.getValueInRange(colorInfo.range);
        var red256 = Math.round(color.red * 255);
        var green256 = Math.round(color.green * 255);
        var blue256 = Math.round(color.blue * 255);
        var label;
        let hex6Digits = this.toHex2Digits(red256) + this.toHex2Digits(green256) + this.toHex2Digits(blue256);
        let rgbCommaSeparated = red256 + ', ' + green256 + ', ' + blue256;
        if (oldColor.startsWith('#')) {
            label = '#' + hex6Digits;
        }
        else if (oldColor.startsWith('0x')) {
            label = '0x' + hex6Digits;
        }
        else if (oldColor.startsWith('rgb')) {
            if (color.alpha < 0.999) {
                label = 'rgba(' + rgbCommaSeparated + ', ' + color.alpha + ')';
            }
            else {
                label = 'rgb(' + rgbCommaSeparated + ')';
            }
        }
        else if (oldColor.startsWith("new") || oldColor.startsWith('Color')) {
            label = 'new Color(' + rgbCommaSeparated + ')';
        }
        return [
            {
                label: label
            }
        ];
    }
    toHex2Digits(n) {
        let hex = n.toString(16);
        while (hex.length < 2) {
            hex = '0' + hex;
        }
        return hex;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTXlDb2xvclByb3ZpZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NsaWVudC9tYWluL2d1aS9NeUNvbG9yUHJvdmlkZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0EsTUFBTSxPQUFPLGVBQWU7SUFFeEIsWUFBb0IsSUFBYztRQUFkLFNBQUksR0FBSixJQUFJLENBQVU7SUFFbEMsQ0FBQztJQUVELHFCQUFxQixDQUFDLEtBQStCLEVBQUUsS0FBK0I7O1FBQ2xGLElBQUksWUFBWSxHQUFHLE1BQUEsTUFBQSxNQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLDBDQUFFLE9BQU8sMENBQUUsTUFBTSwwQ0FBRSxRQUFRLEVBQUUsQ0FBQztRQUN6RSxJQUFJLFNBQVMsR0FBRyxLQUFLLElBQUksWUFBWSxDQUFDO1FBRXRDLElBQUksWUFBWSxHQUFHLEtBQUssSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBRW5FLElBQUksQ0FBQyxDQUFDLFNBQVMsSUFBSSxZQUFZLENBQUM7WUFBRSxPQUFPO1FBRXpDLElBQUksTUFBTSxHQUFXLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBQSxNQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLDBDQUFFLE9BQU8sMENBQUUsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ2pGLE1BQUEsSUFBSSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsRUFBRSwwQ0FBRSxzQkFBc0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUVuRSxJQUFJLE1BQU0sSUFBSSxJQUFJLEVBQUU7WUFDaEIsT0FBTyxJQUFJLENBQUM7U0FDZjtRQUVELElBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxJQUFJLEVBQUM7WUFDL0IsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDO1lBQ2hCLElBQUksQ0FBQyxHQUFHLENB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RyxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3pCLE9BQU0sR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUM7WUFDakIsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7U0FDbkI7UUFDRCxPQUFPLEdBQUcsQ0FBQztJQUNmLENBQUM7Q0FDSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vZHVsZSB9IGZyb20gXCIuLi8uLi9jb21waWxlci9wYXJzZXIvTW9kdWxlLmpzXCI7XHJcbmltcG9ydCB7IE1haW5CYXNlIH0gZnJvbSBcIi4uL01haW5CYXNlLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTXlDb2xvclByb3ZpZGVyIGltcGxlbWVudHMgbW9uYWNvLmxhbmd1YWdlcy5Eb2N1bWVudENvbG9yUHJvdmlkZXIge1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIG1haW46IE1haW5CYXNlKXtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJvdmlkZURvY3VtZW50Q29sb3JzKG1vZGVsOiBtb25hY28uZWRpdG9yLklUZXh0TW9kZWwsIHRva2VuOiBtb25hY28uQ2FuY2VsbGF0aW9uVG9rZW4pOiBtb25hY28ubGFuZ3VhZ2VzLlByb3ZpZGVyUmVzdWx0PG1vbmFjby5sYW5ndWFnZXMuSUNvbG9ySW5mb3JtYXRpb25bXT4ge1xyXG4gICAgICAgIGxldCBjb25zb2xlTW9kZWwgPSB0aGlzLm1haW4uZ2V0Qm90dG9tRGl2KCk/LmNvbnNvbGU/LmVkaXRvcj8uZ2V0TW9kZWwoKTtcclxuICAgICAgICBsZXQgaXNDb25zb2xlID0gbW9kZWwgPT0gY29uc29sZU1vZGVsO1xyXG5cclxuICAgICAgICBsZXQgaXNNYWluV2luZG93ID0gbW9kZWwgPT0gdGhpcy5tYWluLmdldE1vbmFjb0VkaXRvcigpLmdldE1vZGVsKCk7XHJcblxyXG4gICAgICAgIGlmICghKGlzQ29uc29sZSB8fCBpc01haW5XaW5kb3cpKSByZXR1cm47XHJcblxyXG4gICAgICAgIGxldCBtb2R1bGU6IE1vZHVsZSA9IGlzQ29uc29sZSA/IHRoaXMubWFpbi5nZXRCb3R0b21EaXYoKT8uY29uc29sZT8uY29tcGlsZXIubW9kdWxlIDpcclxuICAgICAgICAgICAgdGhpcy5tYWluLmdldEN1cnJlbnRXb3Jrc3BhY2UoKT8uZ2V0TW9kdWxlQnlNb25hY29Nb2RlbChtb2RlbCk7XHJcblxyXG4gICAgICAgIGlmIChtb2R1bGUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICBpZih0aGlzLm1haW4uZ2V0Q29tcGlsZXIoKSA9PSBudWxsKXtcclxuICAgICAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xyXG4gICAgICAgICAgICBsZXQgaSA9IDM7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBmID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRoYXQubWFpbi5nZXRDb21waWxlcigpICE9IG51bGwpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lm1haW4uY29tcGlsZUlmRGlydHkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShtb2R1bGUuY29sb3JJbmZvcm1hdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaS0tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGYsIDUwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmLCA1MDApOyAgICAgICBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubWFpbi5jb21waWxlSWZEaXJ0eSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBtb2R1bGUuY29sb3JJbmZvcm1hdGlvbjtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJvdmlkZUNvbG9yUHJlc2VudGF0aW9ucyhtb2RlbDogbW9uYWNvLmVkaXRvci5JVGV4dE1vZGVsLCBjb2xvckluZm86IG1vbmFjby5sYW5ndWFnZXMuSUNvbG9ySW5mb3JtYXRpb24sIHRva2VuOiBtb25hY28uQ2FuY2VsbGF0aW9uVG9rZW4pOiBtb25hY28ubGFuZ3VhZ2VzLlByb3ZpZGVyUmVzdWx0PG1vbmFjby5sYW5ndWFnZXMuSUNvbG9yUHJlc2VudGF0aW9uW10+IHtcclxuICAgICAgICB2YXIgY29sb3IgPSBjb2xvckluZm8uY29sb3I7XHJcbiAgICAgICAgdmFyIG9sZENvbG9yOiBzdHJpbmcgPSBtb2RlbC5nZXRWYWx1ZUluUmFuZ2UoY29sb3JJbmZvLnJhbmdlKTtcclxuXHJcbiAgICAgICAgdmFyIHJlZDI1NiA9IE1hdGgucm91bmQoY29sb3IucmVkICogMjU1KTtcclxuICAgICAgICB2YXIgZ3JlZW4yNTYgPSBNYXRoLnJvdW5kKGNvbG9yLmdyZWVuICogMjU1KTtcclxuICAgICAgICB2YXIgYmx1ZTI1NiA9IE1hdGgucm91bmQoY29sb3IuYmx1ZSAqIDI1NSk7XHJcbiAgICAgICAgdmFyIGxhYmVsO1xyXG5cclxuICAgICAgICBsZXQgaGV4NkRpZ2l0cyA9IHRoaXMudG9IZXgyRGlnaXRzKHJlZDI1NikgKyB0aGlzLnRvSGV4MkRpZ2l0cyhncmVlbjI1NikgKyB0aGlzLnRvSGV4MkRpZ2l0cyhibHVlMjU2KTtcclxuICAgICAgICBsZXQgcmdiQ29tbWFTZXBhcmF0ZWQgPSByZWQyNTYgKyAnLCAnICsgZ3JlZW4yNTYgKyAnLCAnICsgYmx1ZTI1NjtcclxuXHJcbiAgICAgICAgaWYob2xkQ29sb3Iuc3RhcnRzV2l0aCgnIycpKXtcclxuICAgICAgICAgICAgbGFiZWwgPSAnIycgKyBoZXg2RGlnaXRzOyBcclxuICAgICAgICB9IGVsc2UgaWYob2xkQ29sb3Iuc3RhcnRzV2l0aCgnMHgnKSApe1xyXG4gICAgICAgICAgICBsYWJlbCA9ICcweCcgKyBoZXg2RGlnaXRzO1xyXG4gICAgICAgIH0gZWxzZSBpZihvbGRDb2xvci5zdGFydHNXaXRoKCdyZ2InKSl7XHJcbiAgICAgICAgICAgIGlmKGNvbG9yLmFscGhhIDwgMC45OTkpe1xyXG4gICAgICAgICAgICAgICAgbGFiZWwgPSAncmdiYSgnICsgcmdiQ29tbWFTZXBhcmF0ZWQgKyAnLCAnICsgY29sb3IuYWxwaGEgKyAnKSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbCA9ICdyZ2IoJyArIHJnYkNvbW1hU2VwYXJhdGVkICsgJyknO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmKG9sZENvbG9yLnN0YXJ0c1dpdGgoXCJuZXdcIikgfHwgb2xkQ29sb3Iuc3RhcnRzV2l0aCgnQ29sb3InKSl7XHJcbiAgICAgICAgICAgIGxhYmVsID0gJ25ldyBDb2xvcignICsgcmdiQ29tbWFTZXBhcmF0ZWQgKyAnKSc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogbGFiZWxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcblxyXG4gICAgdG9IZXgyRGlnaXRzKG46IG51bWJlcil7XHJcbiAgICAgICAgbGV0IGhleCA9IG4udG9TdHJpbmcoMTYpO1xyXG4gICAgICAgIHdoaWxlKGhleC5sZW5ndGggPCAyKXtcclxuICAgICAgICAgICAgaGV4ID0gJzAnICsgaGV4O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaGV4O1xyXG4gICAgfVxyXG59Il19