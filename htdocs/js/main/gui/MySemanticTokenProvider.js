import { Interface, Klass } from "../../compiler/types/Class.js";
import { Attribute, Method, PrimitiveType, Type } from "../../compiler/types/Types.js";
export class MySemanticTokenProvider {
    constructor(main) {
        this.main = main;
        this.tokenTypes = [
            'comment', 'string', 'keyword', 'number', 'regexp', 'operator', 'namespace',
            'type', 'struct', 'class', 'interface', 'enum', 'typeParameter', 'function',
            'member', 'macro', 'variable', 'parameter', 'property', 'label'
        ];
        this.tokenModifiers = ['declaration', 'documentation', 'readonly', 'static', 'abstract', 'deprecated',
            'modification', 'async'];
        this.legend = {
            tokenTypes: this.tokenTypes,
            tokenModifiers: this.tokenModifiers
        };
    }
    provideDocumentRangeSemanticTokens(model, range, token) {
        var _a;
        let module = this.main.getCurrentlyEditedModule();
        if (module.model.id != model.id)
            return {
                data: new Uint32Array(),
                resultId: null
            };
        let lastPos = {
            line: 0,
            column: 0
        };
        let data = [];
        for (let line = range.startLineNumber; line <= range.endLineNumber; line++) {
            let identifierPositions = module.identifierPositions[line];
            if (identifierPositions != null) {
                for (let ip of identifierPositions) {
                    let element = ip.element;
                    if (element instanceof Klass || element instanceof Method || element instanceof Interface
                        || element instanceof Attribute) {
                        if (element instanceof Attribute) {
                            this.registerToken(ip.position, element.identifier, lastPos, data, this.tokenTypes.indexOf("property"), 0);
                        }
                    }
                    else if (element instanceof PrimitiveType) {
                    }
                    else if (!(element instanceof Type)) {
                        // Variable
                        let typeIdentifier = (_a = element === null || element === void 0 ? void 0 : element.type) === null || _a === void 0 ? void 0 : _a.identifier;
                    }
                }
            }
        }
        return {
            data: new Uint32Array(data),
            resultId: null
        };
    }
    getLegend() {
        return this.legend;
    }
    registerToken(position, identifier, lastPos, data, tokenTypeIndex, tokenModifierIndex) {
        data.push(position.line - 1 - lastPos.line, position.line - 1 == lastPos.line ? position.column - 1 - lastPos.column : position.column - 1, identifier.length, tokenTypeIndex, tokenModifierIndex);
        lastPos.line = position.line - 1;
        lastPos.column = position.column - 1;
    }
    releaseDocumentSemanticTokens(resultId) {
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTXlTZW1hbnRpY1Rva2VuUHJvdmlkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY2xpZW50L21haW4vZ3VpL015U2VtYW50aWNUb2tlblByb3ZpZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDakUsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsYUFBYSxFQUFFLElBQUksRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBSXZGLE1BQU0sT0FBTyx1QkFBdUI7SUFXaEMsWUFBb0IsSUFBYztRQUFkLFNBQUksR0FBSixJQUFJLENBQVU7UUFUbEMsZUFBVSxHQUFHO1lBQ1QsU0FBUyxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsV0FBVztZQUMzRSxNQUFNLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLGVBQWUsRUFBRSxVQUFVO1lBQzNFLFFBQVEsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUUsT0FBTztTQUNsRSxDQUFDO1FBQ0YsbUJBQWMsR0FBRyxDQUFDLGFBQWEsRUFBRSxlQUFlLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsWUFBWTtZQUM1RixjQUFjLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFJekIsSUFBSSxDQUFDLE1BQU0sR0FBRztZQUNWLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVTtZQUMzQixjQUFjLEVBQUUsSUFBSSxDQUFDLGNBQWM7U0FDdEMsQ0FBQTtJQUNMLENBQUM7SUFFRCxrQ0FBa0MsQ0FBQyxLQUErQixFQUFFLEtBQW1CLEVBQUUsS0FBK0I7O1FBRXBILElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsd0JBQXdCLEVBQUUsQ0FBQztRQUNsRCxJQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxJQUFJLEtBQUssQ0FBQyxFQUFFO1lBQUUsT0FBTztnQkFDbkMsSUFBSSxFQUFFLElBQUksV0FBVyxFQUFFO2dCQUN2QixRQUFRLEVBQUUsSUFBSTthQUNqQixDQUFDO1FBQ0YsSUFBSSxPQUFPLEdBQUc7WUFDVixJQUFJLEVBQUUsQ0FBQztZQUNQLE1BQU0sRUFBRSxDQUFDO1NBQ1osQ0FBQTtRQUVELElBQUksSUFBSSxHQUFhLEVBQUUsQ0FBQztRQUV4QixLQUFJLElBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxlQUFlLEVBQUUsSUFBSSxJQUFJLEtBQUssQ0FBQyxhQUFhLEVBQUUsSUFBSSxFQUFFLEVBQUM7WUFDdEUsSUFBSSxtQkFBbUIsR0FBRyxNQUFNLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDM0QsSUFBRyxtQkFBbUIsSUFBSSxJQUFJLEVBQUM7Z0JBQzNCLEtBQUksSUFBSSxFQUFFLElBQUksbUJBQW1CLEVBQUM7b0JBRTlCLElBQUksT0FBTyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUM7b0JBRXpCLElBQUksT0FBTyxZQUFZLEtBQUssSUFBSSxPQUFPLFlBQVksTUFBTSxJQUFJLE9BQU8sWUFBWSxTQUFTOzJCQUNsRixPQUFPLFlBQVksU0FBUyxFQUFFO3dCQUU3QixJQUFHLE9BQU8sWUFBWSxTQUFTLEVBQUM7NEJBQzVCLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsVUFBVSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQzdELElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO3lCQUMvQztxQkFHUjt5QkFBTSxJQUFJLE9BQU8sWUFBWSxhQUFhLEVBQUU7cUJBQzVDO3lCQUFNLElBQUcsQ0FBQyxDQUFDLE9BQU8sWUFBWSxJQUFJLENBQUMsRUFBQzt3QkFDakMsV0FBVzt3QkFDWCxJQUFJLGNBQWMsR0FBVyxNQUFBLE9BQU8sYUFBUCxPQUFPLHVCQUFQLE9BQU8sQ0FBRSxJQUFJLDBDQUFFLFVBQVUsQ0FBQztxQkFFMUQ7aUJBRUo7YUFDSjtTQUNKO1FBRUQsT0FBTztZQUNILElBQUksRUFBRSxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUM7WUFDM0IsUUFBUSxFQUFFLElBQUk7U0FDakIsQ0FBQztJQUVOLENBQUM7SUFJRCxTQUFTO1FBQ0wsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3ZCLENBQUM7SUFHRCxhQUFhLENBQUMsUUFBc0IsRUFBRSxVQUFrQixFQUNwRCxPQUEwQyxFQUFFLElBQWMsRUFBRSxjQUFzQixFQUFFLGtCQUEwQjtRQUMxRyxJQUFJLENBQUMsSUFBSSxDQUNMLFFBQVEsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxJQUFJLEVBQ2hDLFFBQVEsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUM5RixVQUFVLENBQUMsTUFBTSxFQUNqQixjQUFjLEVBQ2Qsa0JBQWtCLENBQ3JCLENBQUM7UUFDRixPQUFPLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDO1FBQ2pDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7SUFDN0MsQ0FBQztJQUVELDZCQUE2QixDQUFDLFFBQWdCO0lBRTlDLENBQUM7Q0FLSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRleHRQb3NpdGlvbiB9IGZyb20gXCIuLi8uLi9jb21waWxlci9sZXhlci9Ub2tlbi5qc1wiO1xyXG5pbXBvcnQgeyBTeW1ib2xUYWJsZSB9IGZyb20gXCIuLi8uLi9jb21waWxlci9wYXJzZXIvU3ltYm9sVGFibGUuanNcIjtcclxuaW1wb3J0IHsgSW50ZXJmYWNlLCBLbGFzcyB9IGZyb20gXCIuLi8uLi9jb21waWxlci90eXBlcy9DbGFzcy5qc1wiO1xyXG5pbXBvcnQgeyBBdHRyaWJ1dGUsIE1ldGhvZCwgUHJpbWl0aXZlVHlwZSwgVHlwZSB9IGZyb20gXCIuLi8uLi9jb21waWxlci90eXBlcy9UeXBlcy5qc1wiO1xyXG5pbXBvcnQgeyBNYWluIH0gZnJvbSBcIi4uL01haW4uanNcIjtcclxuaW1wb3J0IHsgTWFpbkJhc2UgfSBmcm9tIFwiLi4vTWFpbkJhc2UuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNeVNlbWFudGljVG9rZW5Qcm92aWRlciBpbXBsZW1lbnRzIG1vbmFjby5sYW5ndWFnZXMuRG9jdW1lbnRSYW5nZVNlbWFudGljVG9rZW5zUHJvdmlkZXIge1xyXG4gICAgXHJcbiAgICB0b2tlblR5cGVzID0gW1xyXG4gICAgICAgICdjb21tZW50JywgJ3N0cmluZycsICdrZXl3b3JkJywgJ251bWJlcicsICdyZWdleHAnLCAnb3BlcmF0b3InLCAnbmFtZXNwYWNlJyxcclxuICAgICAgICAndHlwZScsICdzdHJ1Y3QnLCAnY2xhc3MnLCAnaW50ZXJmYWNlJywgJ2VudW0nLCAndHlwZVBhcmFtZXRlcicsICdmdW5jdGlvbicsXHJcbiAgICAgICAgJ21lbWJlcicsICdtYWNybycsICd2YXJpYWJsZScsICdwYXJhbWV0ZXInLCAncHJvcGVydHknLCAnbGFiZWwnXHJcbiAgICBdO1xyXG4gICAgdG9rZW5Nb2RpZmllcnMgPSBbJ2RlY2xhcmF0aW9uJywgJ2RvY3VtZW50YXRpb24nLCAncmVhZG9ubHknLCAnc3RhdGljJywgJ2Fic3RyYWN0JywgJ2RlcHJlY2F0ZWQnLFxyXG4gICAgICAgICdtb2RpZmljYXRpb24nLCAnYXN5bmMnXTtcclxuICAgIGxlZ2VuZDogbW9uYWNvLmxhbmd1YWdlcy5TZW1hbnRpY1Rva2Vuc0xlZ2VuZDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIG1haW46IE1haW5CYXNlKXtcclxuICAgICAgICB0aGlzLmxlZ2VuZCA9IHtcclxuICAgICAgICAgICAgdG9rZW5UeXBlczogdGhpcy50b2tlblR5cGVzLFxyXG4gICAgICAgICAgICB0b2tlbk1vZGlmaWVyczogdGhpcy50b2tlbk1vZGlmaWVyc1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm92aWRlRG9jdW1lbnRSYW5nZVNlbWFudGljVG9rZW5zKG1vZGVsOiBtb25hY28uZWRpdG9yLklUZXh0TW9kZWwsIHJhbmdlOiBtb25hY28uUmFuZ2UsIHRva2VuOiBtb25hY28uQ2FuY2VsbGF0aW9uVG9rZW4pOiBtb25hY28ubGFuZ3VhZ2VzLlByb3ZpZGVyUmVzdWx0PG1vbmFjby5sYW5ndWFnZXMuU2VtYW50aWNUb2tlbnM+IHtcclxuXHJcbiAgICAgICAgbGV0IG1vZHVsZSA9IHRoaXMubWFpbi5nZXRDdXJyZW50bHlFZGl0ZWRNb2R1bGUoKTtcclxuICAgICAgICBpZihtb2R1bGUubW9kZWwuaWQgIT0gbW9kZWwuaWQpIHJldHVybiB7XHJcbiAgICAgICAgICAgIGRhdGE6IG5ldyBVaW50MzJBcnJheSgpLFxyXG4gICAgICAgICAgICByZXN1bHRJZDogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IGxhc3RQb3MgPSB7XHJcbiAgICAgICAgICAgIGxpbmU6IDAsXHJcbiAgICAgICAgICAgIGNvbHVtbjogMFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGRhdGE6IG51bWJlcltdID0gW107XHJcblxyXG4gICAgICAgIGZvcihsZXQgbGluZSA9IHJhbmdlLnN0YXJ0TGluZU51bWJlcjsgbGluZSA8PSByYW5nZS5lbmRMaW5lTnVtYmVyOyBsaW5lKyspe1xyXG4gICAgICAgICAgICBsZXQgaWRlbnRpZmllclBvc2l0aW9ucyA9IG1vZHVsZS5pZGVudGlmaWVyUG9zaXRpb25zW2xpbmVdO1xyXG4gICAgICAgICAgICBpZihpZGVudGlmaWVyUG9zaXRpb25zICE9IG51bGwpe1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpcCBvZiBpZGVudGlmaWVyUG9zaXRpb25zKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVsZW1lbnQgPSBpcC5lbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEtsYXNzIHx8IGVsZW1lbnQgaW5zdGFuY2VvZiBNZXRob2QgfHwgZWxlbWVudCBpbnN0YW5jZW9mIEludGVyZmFjZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCBlbGVtZW50IGluc3RhbmNlb2YgQXR0cmlidXRlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlbWVudCBpbnN0YW5jZW9mIEF0dHJpYnV0ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlclRva2VuKGlwLnBvc2l0aW9uLCBlbGVtZW50LmlkZW50aWZpZXIsIGxhc3RQb3MsIGRhdGEsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRva2VuVHlwZXMuaW5kZXhPZihcInByb3BlcnR5XCIpLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIFByaW1pdGl2ZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIShlbGVtZW50IGluc3RhbmNlb2YgVHlwZSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBWYXJpYWJsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdHlwZUlkZW50aWZpZXI6IHN0cmluZyA9IGVsZW1lbnQ/LnR5cGU/LmlkZW50aWZpZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGRhdGE6IG5ldyBVaW50MzJBcnJheShkYXRhKSxcclxuICAgICAgICAgICAgcmVzdWx0SWQ6IG51bGxcclxuICAgICAgICB9O1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBvbkRpZENoYW5nZT86IG1vbmFjby5JRXZlbnQ8dm9pZD47XHJcblxyXG4gICAgZ2V0TGVnZW5kKCk6IG1vbmFjby5sYW5ndWFnZXMuU2VtYW50aWNUb2tlbnNMZWdlbmQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxlZ2VuZDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcmVnaXN0ZXJUb2tlbihwb3NpdGlvbjogVGV4dFBvc2l0aW9uLCBpZGVudGlmaWVyOiBzdHJpbmcsIFxyXG4gICAgICAgIGxhc3RQb3M6IHsgbGluZTogbnVtYmVyOyBjb2x1bW46IG51bWJlcjsgfSwgZGF0YTogbnVtYmVyW10sIHRva2VuVHlwZUluZGV4OiBudW1iZXIsIHRva2VuTW9kaWZpZXJJbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGRhdGEucHVzaChcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uLmxpbmUgLSAxIC0gbGFzdFBvcy5saW5lLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb24ubGluZSAtIDEgPT0gbGFzdFBvcy5saW5lID8gcG9zaXRpb24uY29sdW1uIC0gMSAtIGxhc3RQb3MuY29sdW1uIDogcG9zaXRpb24uY29sdW1uIC0gMSxcclxuICAgICAgICAgICAgICAgIGlkZW50aWZpZXIubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgdG9rZW5UeXBlSW5kZXgsXHJcbiAgICAgICAgICAgICAgICB0b2tlbk1vZGlmaWVySW5kZXhcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgbGFzdFBvcy5saW5lID0gcG9zaXRpb24ubGluZSAtIDE7XHJcbiAgICAgICAgICAgIGxhc3RQb3MuY29sdW1uID0gcG9zaXRpb24uY29sdW1uIC0gMTtcclxuICAgIH1cclxuXHJcbiAgICByZWxlYXNlRG9jdW1lbnRTZW1hbnRpY1Rva2VucyhyZXN1bHRJZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG59Il19